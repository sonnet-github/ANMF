<div ng-controller="Our.Umbraco.FullTextSearch.Dashboard.StatusController as vm" class="fulltextsearch">

    <umb-box>
        <umb-box-header title="Index status" title-key="fullTextSearch_indexStatus">
            <umb-button action="vm.indexStatus.load()"
                        button-style="outline"
                        label-key="general_reload"
                        type="button"></umb-button>
        </umb-box-header>
        <umb-box-content>

            <umb-load-indicator ng-if="vm.indexStatus.loading"></umb-load-indicator>

            <div class="umb-node-preview" style="max-width:none;">
                <div class="flex w-100">
                    <i class="umb-node-preview__icon" aria-hidden="true">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="width:2em;fill:currentColor">
                            <path d="M243.47 64.86l-7.335-7.333H36.725V474.23h298.07V156.187l-7.332-7.335L243.47 64.86zm66.287 384.329H61.761V82.566h141.615c37.203 0 19.276 88.18 19.276 88.18s86-20.9 87.104 18.53v259.913zm157.051-330.866l-81.266-81.268H258.938l25.043 25.038h71.481c.063 0 .12.01.185.01-.006.286-.023.547-.023.837 11.174 0 16.69 9.045 19.118 20.95 4.358 22.959-2.312 55.826-2.312 55.826s.137-.031.341-.082c-.114.602-.181.933-.181.933s67.129-16.325 75.793 10.732c.077.294.161.585.225.887.083.302.14.612.207.921.154.928.26 1.889.287 2.904v228.807h-87.998l.002 25.037h113.037V125.66l-7.335-7.337z" />
                            <path d="M275.883 369.348l-1.136-1.136h.002l-45.387-45.391a74.244 74.244 0 0010.056-36.918c.264-41.208-32.923-74.823-74.129-75.082l-.493-.001c-40.974.002-74.327 33.093-74.591 74.129-.26 41.205 32.928 74.82 74.129 75.083l.487.002a74.221 74.221 0 0037.571-10.164l45.347 45.353.004-.004 1.134 1.133c3.43 3.43 8.988 3.427 12.417 0l14.589-14.586c3.426-3.427 3.429-8.989 0-12.418zm-111.429-28.341c-30.643-.197-55.416-25.29-55.222-55.936.196-30.449 25.124-55.222 55.565-55.224l.372.001c14.845.093 28.767 5.962 39.197 16.526 10.429 10.564 16.121 24.56 16.025 39.409-.093 14.781-5.921 28.661-16.407 39.075-10.484 10.415-24.392 16.149-39.162 16.149h-.368z" />
                        </svg>
                    </i>
                    <div class="umb-node-preview__content">
                        <div class="umb-node-preview__name">
                            <localize key="fullTextSearch_indexableNodes">Indexable Nodes</localize>
                        </div>
                        <div class="umb-node-preview__description">
                            <localize key="fullTextSearch_indexableNodesDescription">The total number of indexable nodes, according to the current Full Text Search config</localize>
                        </div>
                    </div>
                    <div style="margin-right:auto;">
                        {{ vm.indexStatus.status.TotalIndexableNodes}}
                    </div>
                </div>
            </div>

            <div class="umb-node-preview" style="max-width:none;">
                <div class="flex w-100">
                    <i class="umb-node-preview__icon" aria-hidden="true">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="width:2em;fill:currentColor">
                            <path d="M243.47 64.86l-7.335-7.333H36.725V474.23h298.07V156.187l-7.332-7.335L243.47 64.86zm66.287 384.329H61.761V82.566h141.615c37.203 0 19.276 88.18 19.276 88.18s86-20.9 87.104 18.53v259.913zm157.051-330.866l-81.266-81.268H258.938l25.043 25.038h71.481c.063 0 .12.01.185.01-.006.286-.023.547-.023.837 11.174 0 16.69 9.045 19.118 20.95 4.358 22.959-2.312 55.826-2.312 55.826s.137-.031.341-.082c-.114.602-.181.933-.181.933s67.129-16.325 75.793 10.732c.077.294.161.585.225.887.083.302.14.612.207.921.154.928.26 1.889.287 2.904v228.807h-87.998l.002 25.037h113.037V125.66l-7.335-7.337z" />
                            <path d="M101.727 206.396h162.68v15.133h-162.68v-15.133zM101.727 245.153h162.68v15.133h-162.68v-15.133zM101.727 283.91h162.68v15.133h-162.68V283.91zM101.727 322.668h162.68v15.133h-162.68v-15.133zM101.727 361.425h162.68v15.133h-162.68v-15.133zM101.727 400.182h162.68v15.133h-162.68v-15.133z" />
                        </svg>
                    </i>
                    <div class="umb-node-preview__content">
                        <div class="umb-node-preview__name">
                            <localize key="fullTextSearch_indexedNodes">Indexed Nodes</localize>
                        </div>
                        <div class="umb-node-preview__description">
                            <localize key="fullTextSearch_indexedNodesDescription">The total number of indexed nodes searchable by Full Text Search</localize>
                        </div>
                    </div>
                    <div style="margin-right:auto;">
                        <button type="button" class="btn-link" style="padding:0;" ng-click="vm.listView.getIndexedNodes()">
                            {{ vm.indexStatus.status.TotalIndexedNodes}}
                        </button>
                    </div>
                </div>
            </div>

            <div class="umb-node-preview" style="max-width:none;">
                <div class="flex w-100">
                    <i class="umb-node-preview__icon" aria-hidden="true">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="width:2em;fill:currentColor">
                            <path d="M168.454 463.182h46.027v-24.51h-46.027v24.51zM107.973 92.637h24.934V73.555h18.084v-24.9h-43.018v43.982zm24.934 202.718h-24.934v44.309h24.934v-44.309zm0 123.497h-24.934v44.33h43.018v-24.51h-18.084v-19.82zm0-61.741h-24.934v44.293h24.934v-44.293zm0-247.025h-24.934v44.292h24.934v-44.292zm0 123.512h-24.934v44.308h24.934v-44.308zm0-61.757h-24.934v44.31h24.934v-44.31zm246.948 167.823h24.949v-44.309h-24.949v44.309zm0-61.758h24.949v-44.308h-24.949v44.308zm0 123.498h24.949v-44.293h-24.949v44.293zM397.48 139.58l-83.618-83.635-7.308-7.289h-74.608v24.9h41.989c37.049 0 19.179 87.836 19.179 87.836s85.712-20.829 86.741 18.478v36.281h24.949v-69.262l-7.324-7.309zM231.946 463.182h46.043v-24.51h-46.043v24.51zm147.909-24.51h-20.93v24.51h45.879v-44.33h-24.949v19.82zM168.454 73.555h46.027v-24.9h-46.027v24.9zm126.982 389.627h46.03v-24.51h-46.03v24.51z" />
                        </svg>
                    </i>
                    <div class="umb-node-preview__content">
                        <div class="umb-node-preview__name">
                            <localize key="fullTextSearch_missingNodes">Missing Nodes</localize>
                        </div>
                        <div class="umb-node-preview__description">
                            <localize key="fullTextSearch_missingNodesDescription">The total number of missing indexed nodes, according to the current Full Text Search config</localize>
                        </div>
                    </div>
                    <div style="margin-right:auto;">
                        <button type="button" class="btn-link" style="padding:0;" ng-click="vm.listView.getMissingNodes()">
                            {{ vm.indexStatus.status.MissingIndexedNodes}}
                        </button>
                    </div>
                </div>
            </div>

            <div class="umb-node-preview" style="max-width:none;">
                <div class="flex w-100">
                    <i class="umb-node-preview__icon" aria-hidden="true">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="width:2em;fill:currentColor">
                            <path d="M396.441 138.878l-83.997-83.993-7.331-7.333H105.702v416.701h298.071V146.214l-7.332-7.336zM130.74 439.217V72.591h141.613c37.201 0 19.274 88.18 19.274 88.18s86-20.901 87.104 18.534v259.912H130.74z" />
                            <path d="M236.791 247.842c0 21.067-22.807 34.235-41.052 23.701a27.369 27.369 0 01-13.684-23.701c0-21.068 22.807-34.235 41.052-23.702a27.37 27.37 0 0113.684 23.702z" fill-rule="evenodd" />
                            <path d="M247.42 246.978c6-7 12-7 18 0" fill="none" />
                            <path d="M185.449 329.243c22.182-25.296 47.793-40.524 71.666-40.524 12.127 0 25.882 4.006 37.526 10.8 11.336 6.608 30.658 26.822 30.658 26.822 1.049.763-16.222 21.665-15.84 22.027 0 0-10.615-11.522-15.33-15.65-4.653-4.074-8.713-7.031-13.224-9.662-8.795-5.129-15.479-7.085-23.79-7.085-17.005 0-32.274 8.618-50.968 31.014z" />
                            <path d="M332.173 247.842c0 21.067-22.807 34.235-41.052 23.701a27.369 27.369 0 01-13.684-23.701c0-21.068 22.807-34.235 41.052-23.702a27.37 27.37 0 0113.684 23.702z" fill-rule="evenodd" />
                        </svg>
                    </i>
                    <div class="umb-node-preview__content">
                        <div class="umb-node-preview__name">
                            <localize key="fullTextSearch_incorrectIndexedNodes">Incorrect Indexed Nodes</localize>
                        </div>
                        <div class="umb-node-preview__description">
                            <localize key="fullTextSearch_incorrectIndexedNodesDescription">The total number of indexed nodes that should not be indexed according to the current Full Text Search config</localize>
                        </div>
                    </div>
                    <div style="margin-right:auto;">
                        <button type="button" class="btn-link" style="padding:0;" ng-click="vm.listView.getIncorrectIndexedNodes()">
                            {{ vm.indexStatus.status.IncorrectIndexedNodes}}
                        </button>
                    </div>
                </div>
            </div>

        </umb-box-content>
    </umb-box>

    <umb-box>
        <umb-box-header title="Configuration" title-key="fullTextSearch_configuration">
            <umb-button action="vm.configuration.reload()"
                        button-style="outline"
                        label-key="general_reload"
                        type="button"></umb-button>
        </umb-box-header>
        <umb-box-content ng-if="vm.configuration.config">
            <table class="table table-bordered table-condensed">
                <caption>&nbsp;</caption>
                <tbody>
                    <tr>
                        <th class="w5"><localize key="fullTextSearch_enabled">Enabled</localize></th>
                        <td>
                            <localize key="fullTextSearch_fullTextSearchIsEnabled" ng-if="vm.configuration.config.Enabled"></localize>
                            <localize key="fullTextSearch_fullTextSearchIsDisabled" ng-if="!vm.configuration.config.Enabled"></localize>
                        </td>
                    </tr>
                    <tr>
                        <th><localize key="fullTextSearch_defaultTitleField">Default Title Field</localize></th>
                        <td>
                            <code ng-bind="vm.configuration.config.DefaultTitleField"></code>
                        </td>
                    </tr>
                    <tr>
                        <th><localize key="fullTextSearch_indexingActiveKey">Indexing Active Key</localize></th>
                        <td>
                            <code ng-bind="vm.configuration.config.IndexingActiveKey"></code>
                        </td>
                    </tr>
                    <tr>
                        <th><localize key="fullTextSearch_disallowedContentTypeAliases">Disallowed Content Type Aliases</localize></th>
                        <td>
                            <code ng-repeat="alias in vm.configuration.config.DisallowedContentTypeAliases track by $index" ng-bind="alias" class="mr1"></code>
                        </td>
                    </tr>
                    <tr>
                        <th><localize key="fullTextSearch_disallowedPropertyAliases">Disallowed Property Aliases</localize></th>
                        <td>
                            <code ng-repeat="alias in vm.configuration.config.DisallowedPropertyAliases track by $index" ng-bind="alias" class="mr1"></code>
                        </td>
                    </tr>
                    <tr>
                        <th><localize key="fullTextSearch_xPathsToRemove">XPaths to remove</localize></th>
                        <td>
                            <code ng-repeat="xpath in vm.configuration.config.XPathsToRemove track by $index" ng-bind="xpath" class="mr1"></code>
                        </td>
                    </tr>
                    <tr>
                        <th><localize key="fullTextSearch_fullTextContentField">Full Text Content Field</localize></th>
                        <td>
                            <code ng-bind="vm.configuration.config.FullTextContentField"></code>
                        </td>
                    </tr>
                    <tr>
                        <th><localize key="fullTextSearch_fullTextPathField">Full Text Path Field</localize></th>
                        <td>
                            <code ng-bind="vm.configuration.config.FullTextPathField"></code>
                        </td>
                    </tr>
                </tbody>
            </table>
        </umb-box-content>
    </umb-box>
</div>
